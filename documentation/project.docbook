<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN" "/opt/local/share/xml/docbook/5.0/dtd/docbook.dtd" [
<!ENTITY project "<literal><productname>iphone-framework</productname></literal>">
]>
<article>
<title>&project; - Makefiles</title>

<sect1>
	<para>This document assumes some modicum of familiarity with Makefiles and iPhone Development.</para>
</sect1>

<!--<sect1 id="terms">
	<title>Terminology</title>
	<para>Terminology used in this document</para>
	<variablelist>
		<varlistentry>
			<term>Framework</term>
			<listitem><para>&project;</para></listitem>
		</varlistentry>
	</variablelist>
</sect1>-->

<sect1 id="project-types">
	<title>Project Types</title>
	<para>&project; provides a few key project types. They are briefly described below.</para>
	<itemizedlist>
		<listitem><para><literal>tweak</literal> - a MobileSubstrate extension</para></listitem>
		<listitem><para><literal>tool</literal> - a commandline tool</para></listitem>
		<listitem><para><literal>application</literal> - a graphical application linking <literal>UIKit</literal></para></listitem>
		<listitem><para><literal>bundle</literal> - a dynamic library, loaded at runtime</para></listitem>
	</itemizedlist>
</sect1>

<sect1 id="new-project">
	<title>Creating a New Project</title>
	<para>We will be creating, as an example, a MobileSubstrate extension named <literal>ExampleExtension</literal>.</para>
	<orderedlist>
		<title>Overview</title>
		<listitem><para>Check out &project;</para></listitem>
		<listitem><para>Create a project workspace</para></listitem>
		<listitem><para>Create a makefile</para></listitem>
		<listitem><para>Code!</para></listitem>
		<listitem><para>???</para></listitem>
		<listitem><para>Profit!!!</para></listitem>
	</orderedlist>
	<sect2>
		<title>Check out &project;</title>
		<para>&project; is kept in a Subversion repository. In our example, we will be keeping framework at <literal>/xmpl/framework</literal>. Check it out as follows:</para>
		<screen>
<prompt>$</prompt> <command>svn co http://svn.howett.net/svn/iphone-framework <replaceable>/xmpl/framework</replaceable></command>
...
Checked out revision ...
<prompt>$</prompt>
		</screen>
	</sect2>
	<sect2>
		<title>Create a project workspace</title>
		<para>We will be using, in this example, <literal>/xmpl/exampleextension</literal>.</para>
		<screen>
<prompt>$ </prompt> <command>mkdir <replaceable>/xmpl/exampleextension</replaceable></command>
<prompt>$ </prompt> <command>cd <replaceable>/xmpl/exampleextension</replaceable></command>
		</screen>
		<para>All further commands will be run from this directory.</para>
	</sect2>
	<sect2>
		<title>Create a makefile</title>
		<para>Boilerplate text. We're using one Objective-C++ file called Tweak.mm.</para>
		<sect3><title>Makefile</title>
		<programlisting>
TWEAK_NAME = ExampleExtension
ExampleExtension_OBJCC_FILES = Tweak.mm

FRAMEWORKDIR = /xmpl/framework
include $(FRAMEWORKDIR)/makefiles/common.mk
include $(FRAMEWORKDIR)/makefiles/tweak.mk
		</programlisting>
		</sect3>
		<sect3><title>Tweak.mm</title>
		<programlisting>
#import &lt;DHHookCommon.h&gt;

static _Constructor void Initialize() {
	// Awesome Stuff
}
		</programlisting>
		</sect3>
	</sect2>
	<sect2>
		<title>Code!</title>
		<para>At this point, you should be able to run <command>make</command>, and <literal>ExampleExtension.dylib</literal> will be produced in the <literal>obj/</literal> directory.
			There will be some errors about layout/DEBIAN/control. Ignore them.</para>
	</sect2>
	<sect2>
		<title>Another section that I need to finish!</title>
	</sect2>
</sect1>
</article>

